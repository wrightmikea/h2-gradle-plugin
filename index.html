<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>H2-gradle-plugin by jamescarr</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>H2-gradle-plugin</h1>
        <p>Gradle plugin to run an embedded h2 server</p>
        <p class="view"><a href="https://github.com/jamescarr/h2-gradle-plugin">View the Project on GitHub <small>jamescarr/h2-gradle-plugin</small></a></p>
        <ul>
          <li><a href="https://github.com/jamescarr/h2-gradle-plugin/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jamescarr/h2-gradle-plugin/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/jamescarr/h2-gradle-plugin">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>Gradle H2 Plugin</h1>

<p><img src="http://www.h2database.com/html/images/h2-logo.png" alt="H2 Logo"></p>

<p><a href="http://travis-ci.org/jamescarr/h2-gradle-plugin"><img src="https://secure.travis-ci.org/jamescarr/h2-gradle-plugin.png?branch=master" alt="Build Status"></a></p>

<p>This plugin provides the capability of running and populating an embedded H2 database as part of a gradle build,
perfect for integration testing with embedded web containers.</p>

<h2>Usage</h2>

<p>To use the h2 plugin, include your in buildscript:</p>

<div class="highlight">
<pre><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'h2'</span>

</pre>
</div>


<p>The plugin jars need to be defined in the classpath of your buildscript. You can either get the plugin jar and pom
from the github download section or upload it to your own repository. Here's how you'd include it if resolving
against github directly.</p>

<div class="highlight">
<pre>
<span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">add</span><span class="o">(</span><span class="k">new</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">ivy</span><span class="o">.</span><span class="na">plugins</span><span class="o">.</span><span class="na">resolver</span><span class="o">.</span><span class="na">URLResolver</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">'GitHub'</span>
            <span class="n">addArtifactPattern</span> <span class="s1">'http://cloud.github.com/downloads/[organisation]/[module]/[module]-[revision].[ext]'</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="s1">'jamescarr:h2-gradle-plugin:0.8.0'</span>
        <span class="n">classpath</span> <span class="s1">'com.h2database:h2:1.3.164'</span>  <span class="c1">// choose your own version</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre>
</div>


<h3>Defining h2 configuration and database named 'example'</h3>

<div class="highlight">
<pre>
<span class="n">h2</span> <span class="o">{</span>
    <span class="n">tcpPort</span> <span class="o">=</span> <span class="mi">9092</span>
    <span class="n">webPort</span> <span class="o">=</span> <span class="mi">8082</span>

    <span class="n">example</span> <span class="o">{</span>
        <span class="n">scripts</span> <span class="o">=</span> <span class="o">[</span>
             <span class="s1">'src/test/resources/cars.sql'</span>
           <span class="o">,</span> <span class="s1">'src/test/resources/init-data.sql'</span>
        <span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre>
</div>


<p>the inner closure databaseName will create a database with that name and populate it with scripts defined by the
script variable. You can have multiple database closures that will create multiple databases.</p>

<div class="highlight">
<pre><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'h2'</span>

<span class="n">h2</span> <span class="o">{</span>
    <span class="n">tcpPort</span> <span class="o">=</span> <span class="mi">9092</span>
    <span class="n">webPort</span> <span class="o">=</span> <span class="mi">8082</span>

    <span class="n">one</span> <span class="o">{</span>
        <span class="n">scripts</span> <span class="o">=</span> <span class="o">[</span>
             <span class="s1">'src/test/resources/cars.sql'</span>
           <span class="o">,</span> <span class="s1">'src/test/resources/init-data.sql'</span>
        <span class="o">]</span>
    <span class="o">}</span>

    <span class="n">two</span> <span class="o">{</span>
        <span class="n">scripts</span> <span class="o">=</span> <span class="o">[</span>
             <span class="s1">'src/test/resources/boats.sql'</span>
           <span class="o">,</span> <span class="s1">'src/test/resources/init-data.sql'</span>
        <span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre>
</div>


<h3>Using with jettyRun</h3>

<div class="highlight">
<pre><span class="n">jettyRun</span><span class="o">.</span><span class="na">doFirst</span> <span class="o">{</span>
  <span class="n">h2start</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
<span class="o">}</span>

</pre>
</div>


<h3>Using with tomcatRun</h3>

<div class="highlight">
<pre><span class="n">tomcatRun</span><span class="o">.</span><span class="na">doFirst</span> <span class="o">{</span>
  <span class="n">h2start</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
<span class="o">}</span>

</pre>
</div>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jamescarr">jamescarr</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>